apiVersion: autoscaling/v2   # HPA objesi için kullanılan Kubernetes API sürümü (v2, CPU ve memory metriclerini destekler)
kind: HorizontalPodAutoscaler  # Kaynak türü; yatay pod ölçekleyici oluşturur
metadata:
  name: gitops-demo-hpa       # HPA nesnesinin adı
  namespace: default          # HPA'nın hangi namespace'te olacağını belirtir
spec:
  scaleTargetRef:             # Hangi kaynağın ölçekleneceğini belirtir
    apiVersion: apps/v1       # Ölçeklenecek kaynağın API sürümü (Deployment, StatefulSet vb.)
    kind: Deployment          # Ölçeklenecek kaynak türü (burada Deployment)
    name: gitops-demo-deployment   # Ölçeklenecek Deployment'ın adı
  minReplicas: 2              # Pod sayısının alabileceği minimum değer
  maxReplicas: 5              # Pod sayısının alabileceği maksimum değer
  metrics:                    # HPA'nın hangi metriklere göre ölçekleneceğini belirler
    - type: Resource           # Ölçeklendirme tipi; burada bir kaynak (CPU/Memory)
      resource:
        name: cpu              # Ölçeklendirme metriği; CPU kullanımına göre
        target:
          type: Utilization    # Hedef tip; burada yüzde bazlı CPU kullanım
          averageUtilization: 50  # Hedef CPU kullanım yüzdesi; pod başına ortalama CPU %50'yi geçerse HPA pod ekler
