apiVersion: networking.k8s.io/v1   # Bu nesnenin hangi API versiyonunda tanımlandığını belirtir. Ingress v1 kullanılıyor.
kind: Ingress                      # Nesne tipi: Ingress. HTTP/HTTPS trafiğini yönlendirmek için kullanılır.
metadata:
  name: gitops-demo-ingress         # Ingress nesnesinin ismi
  namespace: default                # Ingress'in hangi namespace içinde oluşturulacağını belirtir
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /   # Nginx Ingress controller'a, path'i backend servise / olarak rewrite etmesini söyler
spec:
  rules:                             # Trafik yönlendirme kuralları burada tanımlanır
  - host: gitops-demo.local          # Bu host adına gelen istekler için kurallar geçerli olur
    http:
      paths:                         # HTTP path bazlı yönlendirmeler
      - path: /                      # Bu path ile başlayan tüm istekler
        pathType: Prefix             # Path eşleştirme tipi: Prefix, path ile başlayan tüm URL'ler eşleşir
        backend:                     # Trafiğin yönlendirileceği backend servis
          service:
            name: gitops-demo-deployment   # Hedef servis adı (Deployment için oluşturulan Service)
            port:
              number: 80                  # Servisin portu, trafiğin buraya yönlendirileceğini belirtir
